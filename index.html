<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Выбор курса</title>
    <style>
        /* Стили для скрытия элементов */
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <form id="userForm">
        <label for="course">Выберите курс:</label>
        <select id="course" name="course" required>
            <option value="1">Курс 1</option>
            <option value="2">Курс 2</option>
        </select><br>

        <label for="direction">Выберите направление:</label>
        <select id="direction" name="direction" required>
            <option value="management">Менеджмент</option>
            <option value="pmi">ПМИ</option>
            <option value="jurisprudence">Юриспруденция</option>
        </select><br>

        <label for="password">Введите пароль:</label>
        <input type="password" id="password" name="password" required><br>

        <button type="submit">Отправить</button>
    </form>

    <div id="schedule"></div>
    <button id="deleteButton" class="hidden">Удалить данные</button>

    <script>
        // Функция для проверки, сохранены ли данные пользователя
        function checkUserData() {
            const userId = localStorage.getItem('userId');
            if (userId) {
                const userCourse = localStorage.getItem('course');
                const userDirection = localStorage.getItem('direction');
                showSchedule(userCourse, userDirection);
                // Скрываем форму и показываем кнопку удаления, если данные уже сохранены
                document.getElementById('userForm').classList.add('hidden');
                document.getElementById('deleteButton').classList.remove('hidden');
            }
        }

        // Функция для отображения расписания
        function showSchedule(course, direction) {
            const scheduleDiv = document.getElementById('schedule');
            scheduleDiv.innerHTML = `<h2>Расписание для курса ${course} и направления ${direction}</h2>`;
            // Здесь можно добавить логику для отображения реального расписания
        }

        // Обработчик отправки формы
        document.getElementById('userForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const course = document.getElementById('course').value;
            const direction = document.getElementById('direction').value;
            const password = document.getElementById('password').value;

            // Проверка пароля
            if (password === '12345678') {
                const userId = 'user-telegram-id'; // Замените на реальный ID пользователя Telegram
                localStorage.setItem('userId', userId);
                localStorage.setItem('course', course);
                localStorage.setItem('direction', direction);

                showSchedule(course, direction);
                // Скрываем форму и показываем кнопку удаления после ввода данных
                document.getElementById('userForm').classList.add('hidden');
                document.getElementById('deleteButton').classList.remove('hidden');
            } else {
                alert('Неверный пароль');
            }
        });

        // Обработчик удаления данных
        document.getElementById('deleteButton').addEventListener('click', function() {
            localStorage.removeItem('userId');
            localStorage.removeItem('course');
            localStorage.removeItem('direction');
            alert('Данные удалены. Пожалуйста, обновите страницу.');
            document.getElementById('userForm').classList.remove('hidden');
            document.getElementById('deleteButton').classList.add('hidden');
            document.getElementById('schedule').innerHTML = '';
        });

        // Проверка данных пользователя при загрузке страницы
        window.onload = checkUserData;
    </script>
</body>
</html>