<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Выбор курса</title>
    <style>
        /* Стили для скрытия элементов */
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <form id="userForm">
        <label for="course">Выберите курс:</label>
        <select id="course" name="course" required>
            <option value="1">Курс 1</option>
            <option value="2">Курс 2</option>
        </select><br>

        <label for="direction">Выберите направление:</label>
        <select id="direction" name="direction" required>
            <option value="management">Менеджмент</option>
            <option value="pmi">ПМИ</option>
            <option value="jurisprudence">Юриспруденция</option>
        </select><br>

        <label for="password">Введите пароль:</label>
        <input type="password" id="password" name="password" required><br>

        <button type="submit">Отправить</button>
    </form>

    <div id="schedule"></div>

    <!-- Админ-интерфейс -->
    <form id="adminForm" class="hidden">
        <h2>Админ-интерфейс</h2>
        <label for="adminPassword">Введите админ-пароль:</label>
        <input type="password" id="adminPassword" name="adminPassword" required><br>
        <button type="submit">Войти</button>
    </form>
    <div id="adminPanel" class="hidden">
        <button id="showIdsButton">Показать все сохранённые ID</button>
        <div id="allIds" class="hidden"></div>
        <button id="deleteSpecificButton" class="hidden">Удалить конкретный ID</button>
        <input type="text" id="deleteSpecificInput" class="hidden" placeholder="Введите ID для удаления">
    </div>

    <script>
        // Функция для проверки, сохранены ли данные пользователя
        function checkUserData() {
            const userId = localStorage.getItem('userId');
            if (userId) {
                const userCourse = localStorage.getItem('course');
                const userDirection = localStorage.getItem('direction');
                showSchedule(userCourse, userDirection);
                // Скрываем форму, если данные уже сохранены
                document.getElementById('userForm').classList.add('hidden');
            }
        }

        // Функция для отображения расписания
        function showSchedule(course, direction) {
            const scheduleDiv = document.getElementById('schedule');
            scheduleDiv.innerHTML = `<h2>Расписание для курса ${course} и направления ${direction}</h2>`;
            // Здесь можно добавить логику для отображения реального расписания
        }

        // Обработчик отправки формы пользователя
        document.getElementById('userForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const course = document.getElementById('course').value;
            const direction = document.getElementById('direction').value;
            const password = document.getElementById('password').value;

            // Проверка пароля
            if (password === '12345678') {
                const userId = 'user-telegram-id'; // Замените на реальный ID пользователя Telegram
                saveUserId(userId, course, direction);
                showSchedule(course, direction);
                // Скрываем форму после ввода данных
                document.getElementById('userForm').classList.add('hidden');
            } else {
                alert('Неверный пароль');
            }
        });

        // Функция для сохранения ID пользователя
        function saveUserId(userId, course, direction) {
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const user = { id: userId, course: course, direction: direction };
            users.push(user);
            localStorage.setItem('users', JSON.stringify(users));
            localStorage.setItem('userId', userId);
            localStorage.setItem('course', course);
            localStorage.setItem('direction', direction);
        }

        // Обработчик формы админа
        document.getElementById('adminForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const adminPassword = document.getElementById('adminPassword').value;

            // Проверка админ-пароля
            if (adminPassword === 'admin-password') { // Замените на реальный админ-пароль
                document.getElementById('adminForm').classList.add('hidden');
                document.getElementById('adminPanel').classList.remove('hidden');
            } else {
                alert('Неверный админ-пароль');
            }
        });

        // Админ-интерфейс: Показать все сохранённые ID
        document.getElementById('showIdsButton').addEventListener('click', function() {
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const allIdsDiv = document.getElementById('allIds');
            if (users.length > 0) {
                allIdsDiv.innerHTML = '<ul>' + users.map(user => `<li>ID: ${user.id}, Курс: ${user.course}, Направление: ${user.direction}</li>`).join('') + '</ul>';
                allIdsDiv.classList.remove('hidden');
                document.getElementById('deleteSpecificButton').classList.remove('hidden');
                document.getElementById('deleteSpecificInput').classList.remove('hidden');
            } else {
                allIdsDiv.innerHTML = 'Нет сохранённых ID';
                allIdsDiv.classList.remove('hidden');
            }
        });

        // Админ-интерфейс: Удалить конкретный ID
        document.getElementById('deleteSpecificButton').addEventListener('click', function() {
            const deleteId = document.getElementById('deleteSpecificInput').value;
            if (deleteId) {
                deleteUserId(deleteId);
                alert(`ID ${deleteId} удалён.`);
                document.getElementById('deleteSpecificInput').value = '';
                document.getElementById('allIds').classList.add('hidden');
            } else {
                alert('Введите ID для удаления');
            }
        });

        // Функция для удаления ID пользователя
        function deleteUserId(userId) {
            let users = JSON.parse(localStorage.getItem('users')) || [];
            users = users.filter(user => user.id !== userId);
            localStorage.setItem('users', JSON.stringify(users));
        }

        // Проверка данных пользователя при загрузке страницы
        window.onload = function() {
            checkUserData();
            // Показать админ-форму
            document.getElementById('adminForm').classList.remove('hidden');
        }
    </script>
</body>
</html>